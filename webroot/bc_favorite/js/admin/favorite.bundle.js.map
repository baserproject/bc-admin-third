{"version":3,"file":"bc_favorite/js/admin/favorite.bundle.js","mappings":";;;;;;;;;AAcAA,GAAE,WAyGE,SAASC,EAAyBC,EAAOC,GACrCH,EAAE,sCAAsCI,IAAI,SAAUD,EAAGE,KAAKC,UAC9DH,EAAGE,KAAKE,WAAaJ,EAAGE,KAAKG,OACjC,CAKA,SAASC,EAA0BP,EAAOC,GACtC,IAAIO,EAAYV,EAAE,uBACdW,EAASR,EAAGE,KAAKG,QAAUL,EAAGE,KAAKE,WACnCK,EAAKT,EAAGE,KAAKQ,KAAK,WAEtBb,EAAEc,QAAQC,OAAM,WACZ,IAAIC,EAAO,CACP,GAAMJ,EACN,OAAUD,EACV,WAAcX,EAAEc,QAAQG,KAE5B,OAAOjB,EAAEkB,KAAK,CACVC,IAAKnB,EAAEoB,OAAOC,WAAa,yCAC3BC,QAAS,CACL,cAAiBtB,EAAEuB,MAAMC,aAE7BC,KAAM,OACNT,KAAMA,EACNU,SAAU,OACVC,WAAY,WACR3B,EAAE,YAAY4B,MAClB,EACAC,QAAS,SAAUC,GACfpB,EAAUqB,KAAK,MAAMC,MAAK,SAAUxB,GAChCR,EAAEiC,MAAMpB,KAAK,KAAM,cAAgBL,EACvC,GACJ,EACA0B,MAAO,WACHxB,EAAUyB,SAAS,UACnBC,MAAMC,OAAOC,sBACjB,EACAC,SAAU,WACNvC,EAAE,YAAYwC,MAClB,GAER,GAAG,CAACC,YAAY,GACpB,CApJAzC,EAAE,mBAAmB0C,OAAM,WACvBC,SAASC,cAAc,qBAAqBC,QAAQC,WACxD,IAKA9C,EAAE,QAAQ+C,OAAO/C,EAAE,mBA+CnBA,EAAE,oBAAoBgD,GAAG,CACrBC,QAAS,QACTC,UAAW,MACXC,QAAQ,EACRC,cAAe,EACfC,cAAe,EACfC,WAAY,EACZC,YAAa,iBACbC,eAAe,EACfC,aAAc,CACVC,YAAa,OACbC,YAAa,GAEjBC,MAAO,QAEPC,YAAa,GACbC,WAAY,GACZC,QAAS,GACTC,aAAc,EACdL,YAAa,EACbD,YAAa,OACbO,KAAM,4BACNC,UAAW,CACPC,SAAU,QAEdC,QAAS,SAAUC,GACfrE,EAAEqE,GAAKC,OAAO,IAClB,EACAC,QAAS,SAAUF,EAAKG,GACpBxE,EAAEqE,GAAKI,QAAQ,CACXC,QAAS,GACV,IAAKF,EACZ,EACAG,gBAAiB,qCAkErB,WAGI3E,EAAE,0BAA0B4E,SAE5B,IACI5E,EAAE,uBAAuBmC,SAAS,UAEtC,CADE,MAAO0C,GACT,CAGA,IAAIC,EAA0B,CAC1BC,QAAQ,EACRL,QAAS,GACTM,OAAQ,GACRC,YAAa,OACbC,UAAW,UACXC,SAAU,EACVC,OAAQ,UACRC,YAAa,gCAEbC,OAAQ,IACRC,MAAOtF,EACPuF,OAAQ/E,GAGZT,EAAE,uBAAuBmC,SAAS2C,GAElC,IAAIW,EAAI,EACRzF,EAAE,0BAA0BgC,MAAK,WAExBhC,EAAEiC,MAAMpB,KAAK,SAAS6E,MAAM,YAA0C,MAA5B1F,EAAEiC,MAAMF,KAAK,KAAK4D,QAG7D3F,EAAEiC,MAAMpB,KAAK,KAAM,cAAiB4E,GACpCA,KAHAzF,EAAEiC,MAAM2D,QAKhB,GAEJ,CApGAC,GAIA7F,EAAE,qBAAqB8F,WACvB9F,EAAE,qBAAqB+F,QAAO,WAC1B,OAAO,CACX,GA+FJ","sources":["webpack://bc-admin-third/./src/bc_favorite/js/admin/favorite.js"],"sourcesContent":["/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright       Copyright (c) baserCMS Users Community\n * @link            https://basercms.net baserCMS Project\n * @since           baserCMS v 2.0.0\n * @license         https://basercms.net/license/index.html\n */\n\n/**\n * よく使う項目の処理を行う\n */\n\n$(function () {\n    $(\"#BtnFavoriteAdd\").click(function(){\n        document.querySelector('#FavoriteListWrap').__vue__.openModal();\n    });\n    //\n    // var currentPageName = $('#FavoriteScript').attr('data-current-page-name');\n    // var currentPageUrl = $('#FavoriteScript').attr('data-current-page-url');\n\n    $(\"body\").append($(\"#FavoritesMenu\"));\n    //\n    // /**\n    //  * ダイアログを初期化\n    //  */\n    // $(\"#BtnFavoriteAdd\").click(function () {\n    //     $('#FavoriteDialog').dialog(\n    //         {\n    //             position: {my: \"center\", at: \"center\", of: window},\n    //             bgiframe: true,\n    //             width: '360px',\n    //             modal: true,\n    //             open: function (event, ui) {\n    //                 if ($(\".favorite-menu-list .selected\").length == 0) {\n    //                     $(this).dialog('option', 'title', bcI18n.favoriteTitle1);\n    //                     $(\"#FavoriteName\").val(currentPageName);\n    //                     $(\"#FavoriteUrl\").val(currentPageUrl);\n    //                 } else {\n    //                     $(this).dialog('option', 'title', bcI18n.favoriteTitle2);\n    //                     $(\"#FavoriteId\").val($(\".favorite-menu-list .selected .favorite-id\").val());\n    //                     $(\"#FavoriteName\").val($(\".favorite-menu-list .selected .favorite-name\").val());\n    //                     $(\"#FavoriteUrl\").val($(\".favorite-menu-list .selected .favorite-url\").val());\n    //                 }\n    //                 // $(\"#FavoriteAjaxForm\").submit();\n    //                 $(\"#FavoriteName\").focus();\n    //\n    //             },\n    //             close: function () {\n    //                 $(\"#FavoriteId\").val('');\n    //                 $(\"#FavoriteName\").val('');\n    //                 $(\"#FavoriteUrl\").val('');\n    //             },\n    //             buttons: [\n    //                 {\n    //                     text: bcI18n.commonCancel,\n    //                     click: function () {\n    //                         $(this).dialog('close');\n    //                     }\n    //                 },\n    //                 {\n    //                     text: bcI18n.commonSave,\n    //                 }\n    //             ]\n    //         }\n    //     );\n    //     return false;\n    // });\n    $(\"#BtnFavoriteHelp\").bt({\n        trigger: 'click',\n        positions: 'top',\n        shadow: true,\n        shadowOffsetX: 3,\n        shadowOffsetY: 3,\n        shadowBlur: 8,\n        shadowColor: 'rgba(0,0,0,.8)',\n        shadowOverlap: false,\n        noShadowOpts: {\n            strokeStyle: '#999',\n            strokeWidth: 3\n        },\n        width: '360px',\n        /*shrinkToFit: true,*/\n        spikeLength: 12,\n        spikeGirth: 18,\n        padding: 15,\n        cornerRadius: 0,\n        strokeWidth: 6, /*no stroke*/\n        strokeStyle: '#690',\n        fill: 'rgba(255, 255, 255, 1.00)',\n        cssStyles: {\n            fontSize: '12px'\n        },\n        showTip: function (box) {\n            $(box).fadeIn(200);\n        },\n        hideTip: function (box, callback) {\n            $(box).animate({\n                opacity: 0\n            }, 100, callback);\n        },\n        contentSelector: \"$(this).next('.helptext').html()\"\n    });\n    /**\n     * お気に入り初期化\n     */\n    initFavoriteList();\n    /**\n     * バリデーション\n     */\n    $(\"#FavoriteAjaxForm\").validate();\n    $(\"#FavoriteAjaxForm\").submit(function () {\n        return false\n    });\n\n    /**\n     * 並び替え開始時イベント\n     */\n    function favoriteSortStartHandler(event, ui) {\n        $(\"ul.favorite-menu-list .placeholder\").css('height', ui.item.height());\n        ui.item.startIndex = ui.item.index();\n    }\n\n    /**\n     * 並び順を更新時イベント\n     */\n    function favoriteSortUpdateHandler(event, ui) {\n        var sortTable = $(\".favorite-menu-list\");\n        var offset = ui.item.index() - ui.item.startIndex;\n        var id = ui.item.attr('data-id');\n\n        $.bcToken.check(function () {\n            var data = {\n                'id': id,\n                'offset': offset,\n                '_csrfToken': $.bcToken.key\n            };\n            return $.ajax({\n                url: $.bcUtil.apiBaseUrl + 'bc-favorite/favorites/change_sort.json',\n                headers: {\n                    \"Authorization\": $.bcJwt.accessToken,\n                },\n                type: 'POST',\n                data: data,\n                dataType: 'text',\n                beforeSend: function () {\n                    $(\"#Waiting\").show();\n                },\n                success: function (result) {\n                    sortTable.find(\"li\").each(function (index) {\n                        $(this).attr('id', 'FavoriteRow' + index);\n                    });\n                },\n                error: function () {\n                    sortTable.sortable(\"cancel\");\n                    alert(bcI18n.favoriteAlertMessage1);\n                },\n                complete: function () {\n                    $(\"#Waiting\").hide();\n                }\n            });\n        }, {hideLoader: false});\n    }\n\n    /**\n     * 行を初期化\n     */\n    function initFavoriteList() {\n\n        // イベント削除\n        $(\".favorite-menu-list li\").unbind();\n        //$(\".favorite-menu-list li\").destroyContextMenu();\n        try {\n            $(\".favorite-menu-list\").sortable(\"destroy\");\n        } catch (e) {\n        }\n\n        // イベント登録\n        var favoriteSortableOptions = {\n            scroll: true,\n            opacity: 0.80,\n            zIndex: 55,\n            containment: 'body',\n            tolerance: 'pointer',\n            distance: 5,\n            cursor: 'pointer',\n            placeholder: 'ui-widget-content placeholder',\n            /*handle: \".favorite-menu-list li a\",*/\n            revert: 100,\n            start: favoriteSortStartHandler,\n            update: favoriteSortUpdateHandler\n        };\n\n        $(\".favorite-menu-list\").sortable(favoriteSortableOptions);\n\n        var i = 1;\n        $(\".favorite-menu-list li\").each(function () {\n            // アクセス制限によってリンクが出力されていない場合はLIごと削除する\n            if (!$(this).attr('class').match(/no-data/) && $(this).find('a').html() == null) {\n                $(this).remove();\n            } else {\n                $(this).attr('id', 'FavoriteRow' + (i));\n                i++;\n            }\n        });\n\n    }\n\n});\n"],"names":["$","favoriteSortStartHandler","event","ui","css","item","height","startIndex","index","favoriteSortUpdateHandler","sortTable","offset","id","attr","bcToken","check","data","key","ajax","url","bcUtil","apiBaseUrl","headers","bcJwt","accessToken","type","dataType","beforeSend","show","success","result","find","each","this","error","sortable","alert","bcI18n","favoriteAlertMessage1","complete","hide","hideLoader","click","document","querySelector","__vue__","openModal","append","bt","trigger","positions","shadow","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOverlap","noShadowOpts","strokeStyle","strokeWidth","width","spikeLength","spikeGirth","padding","cornerRadius","fill","cssStyles","fontSize","showTip","box","fadeIn","hideTip","callback","animate","opacity","contentSelector","unbind","e","favoriteSortableOptions","scroll","zIndex","containment","tolerance","distance","cursor","placeholder","revert","start","update","i","match","html","remove","initFavoriteList","validate","submit"],"sourceRoot":""}