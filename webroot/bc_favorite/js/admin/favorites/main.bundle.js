(()=>{"use strict";var t,e={3546:(t,e,a)=>{var i=a(1608),r=a.n(i),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"FavoriteListWrap"}},[e("h2",{staticClass:"bca-nav-favorite-title"},[e("button",{staticClass:"bca-collapse__btn bca-nav-favorite-title-button",attrs:{type:"button",id:"btn-favorite-expand","data-bca-collapse":"favorite-collapse","data-bca-target":"#favoriteBody","aria-expanded":t.ariaExpanded,"aria-controls":"favoriteBody"},on:{click:t.changeOpenFavorite}},[t._v("\n            "+t._s(t.i18Favorite)+" "),e("i",{staticClass:"bca-icon--chevron-down bca-nav-favorite-title-icon"})])]),t._v(" "),t.favorites.length?e("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+t.favoriteBoxOpened,attrs:{id:"favoriteBody"}},t._l(t.favorites,(function(a,i){return e("li",{key:i,staticClass:"bca-nav-favorite-list-item",attrs:{id:"FavoriteRow"+a.id,"data-id":a.id},on:{mousedown:function(e){return t.changeSelected(a)}}},[e("a",{attrs:{href:t.baseUrl+a.url,title:a.url}},[e("span",{staticClass:"bca-nav-favorite-list-item-label"},[t._v(t._s(a.name))])])])})),0):e("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+t.favoriteBoxOpened,attrs:{id:"favoriteBody"}},[e("li",{staticClass:"no-data"},[e("small",[t._v(t._s(t.i18NoData))])])]),t._v(" "),e("div",{staticClass:"ui-widget",attrs:{id:"FavoriteDialog",title:"お気に入り登録"}},[e("modal",{ref:"modalFavoriteForm",attrs:{scrollable:!1,hidden:""}},[e("favorite-form",{ref:"FavoriteForm",attrs:{"user-id":t.userId,"current-page-url":t.currentPageUrl,"current-page-name":t.currentPageName,"current-favorite":t.currentFavorite},on:{formUpdated:t.formUpdated,formSubmitted:t.formSubmitted}}),t._v(" "),e("template",{slot:"footer"},[e("button",{staticClass:"bca-btn",attrs:{type:"button"},on:{click:function(e){return t.$refs.modalFavoriteForm.closeModal()}}},[t._v("キャンセル")]),t._v(" \n                "),e("button",{staticClass:"bca-btn",attrs:{type:"button",disabled:t.formError},on:{click:function(e){return t.$refs.FavoriteForm.formSubmit()}}},[t._v("\n                    確定\n                ")])])],2)],1),t._v(" "),e("ul",{staticClass:"context-menu",staticStyle:{display:"none"},attrs:{id:"FavoritesMenu"}},[e("li",{staticClass:"edit"},[e("a",{attrs:{href:"#FavoriteEdit"}},[t._v(t._s(t.i18Edit))])]),t._v(" "),e("li",{staticClass:"delete"},[e("a",{attrs:{href:"#FavoriteDelete"}},[t._v(t._s(t.i18Delete))])])])])};o._withStripped=!0;var n=a(1715),s=function(){var t=this,e=t._self._c;return e("form",{attrs:{method:"POST",id:"FavoriteAjaxForm"}},[e("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.id}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:t.userId}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"_csrfToken"}}),t._v(" "),e("dl",[e("dt",[e("label",{attrs:{for:"favorite-name"}},[t._v(t._s(t.i18Title))])]),t._v(" "),e("dd",[e("span",{staticClass:"bca-textbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"required",attrs:{type:"text",id:"FavoriteName",placeholder:"タイトル",size:"30",name:"name"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},t.formUpdated]}})]),t._v(" "),t.$v.name.$invalid?e("div",{staticClass:"invalid-feedback",staticStyle:{color:"red"}},[t._v("必須です")]):t._e()]),t._v(" "),e("dt",[e("label",{attrs:{for:"favorite-url"}}),t._v(t._s(t.i18Url))]),t._v(" "),e("dd",[e("span",{staticClass:"bca-textbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"required",attrs:{type:"text",id:"FavoriteUrl",placeholder:"URL",size:"30",name:"url"},domProps:{value:t.url},on:{input:[function(e){e.target.composing||(t.url=e.target.value)},t.formUpdated]}})]),t._v(" "),t.$v.url.$invalid?e("div",{staticClass:"invalid-feedback",staticStyle:{color:"red"}},[t._v("必須です")]):t._e()])])])};s._withStripped=!0;var l=a(9285),c=(l.validationMixin,l.default,a(8836).required);const d={name:"FavoriteForm",data:function(){return{i18Title:"title",i18Url:"url",name:"",url:"",id:""}},validations:{name:{required:c},url:{required:c}},props:["userId","currentPageName","currentPageUrl","currentFavorite"],mounted:function(){this.currentFavorite?(this.id=this.currentFavorite.id,this.name=this.currentFavorite.name,this.url=this.currentFavorite.url):(this.name=this.currentPageName,this.url=this.currentPageUrl)},methods:{formUpdated:function(){this.$emit("formUpdated",this.$v.$invalid)},formSubmit:function(){var t;t=this.id?$.bcUtil.apiBaseUrl+"bc-favorite/favorites/edit/"+this.id+".json":$.bcUtil.apiBaseUrl+"bc-favorite/favorites/add.json";var e=this.userId,a=this.name,i=this.url,r=this;$.bcToken.check((function(){$('#FavoriteAjaxForm input[name="_csrfToken"]').val($.bcToken.key),n.Z.post(t,{user_id:e,name:a,url:i},{headers:{Authorization:$.bcJwt.accessToken}}).then(function(t){t.data&&($("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted"))}.bind(this)).catch((function(t){if(t.response){var e=t.response.data.message+"\n",a=t.response.data.errors;Object.keys(a).forEach((function(t){Object.keys(a[t]).forEach((function(i){e=e+"\n"+a[t][i]}))})),alert(e)}else console.log("Error",t.message);$("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted")}))}),{useUpdate:!1,hideLoader:!1})}}};var u=a(5440);const v=(0,u.Z)(d,s,[],!1,null,null,null).exports;var f=function(){var t=this,e=t._self._c;return t.showModal?e("transition",{attrs:{name:"modal",appear:""}},[e("div",{staticClass:"modal modal-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[e("div",{staticClass:"modal-window"},[e("div",{staticClass:"modal-content"},[t._t("default")],2),t._v(" "),e("footer",{staticClass:"modal-footer"},[t._t("footer",(function(){return[e("button",{attrs:{type:"button"},on:{click:t.closeModal}},[t._v("Close")])]}))],2)])])]):t._e()};f._withStripped=!0;const m={props:{scrollable:Boolean},data:function(){return{showModal:!1}},methods:{openModal:function(t){this.showModal=!0,this.$nextTick((function(){this.scrollable?($(".modal-overlay").css("align-items","normal"),$(".modal-window").css("overflow","scroll").css("display","grid")):($(".modal-overlay").css("align-items","center"),$(".modal-window").css("overflow","hidden")),this.$emit("modal-opened",t)}))},closeModal:function(){this.showModal=!1,this.$emit("modal-closed")}}};const h={data:function(){return{favoriteBoxOpened:"none",i18Favorite:"お気に入り",i18NoData:"nodata",i18Title:"title",i18Url:"url",i18Edit:"edit",i18Delete:"delete",favorites:[],registerUrl:$.bcUtil.apiBaseUrl+"bc-favorite/favorites/add.json",ariaExpanded:"true",baseUrl:$.bcUtil.baseUrl,formError:!1,favorite:{},currentFavorite:null}},props:["userId","currentPageName","currentPageUrl"],components:{FavoriteForm:v,Modal:(0,u.Z)(m,f,[],!1,null,null,null).exports},mounted:function(){this.initFavorite()},methods:{formUpdated:function(t){this.formError=t},initFavorite:function(){this.refresh();var t=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/get_favorite_box_opened.json";n.Z.get(t,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(t){"1"===t.data.result?(this.favoriteBoxOpened="block",this.ariaExpanded="false"):(this.favoriteBoxOpened="none",this.ariaExpanded="true")}.bind(this)),$.contextMenu({selector:".favorite-menu-list li",items:{FavoriteEdit:{name:"編集",icon:"edit"},FavoriteDelete:{name:"削除",icon:"delete"}},callback:this.contextMenuClickHandler})},changeSelected:function(t){this.currentFavorite=t},changeOpenFavorite:function(){if("block"==this.favoriteBoxOpened){this.favoriteBoxOpened="none",this.ariaExpanded="true";var t=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/save_favorite_box.json";n.Z.post(t,{},{headers:{Authorization:$.bcJwt.accessToken}})}else{this.favoriteBoxOpened="block",this.ariaExpanded="false";t=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/save_favorite_box/1.json";n.Z.post(t,{},{headers:{Authorization:$.bcJwt.accessToken}})}},refresh:function(){var t=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/index.json";n.Z.get(t,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(t){this.favorites=t.data.favorites}.bind(this))},openModal:function(t){this.$refs.modalFavoriteForm.openModal(t)},formSubmitted:function(){this.refresh(),this.$refs.modalFavoriteForm.closeModal()},contextMenuClickHandler:function(t,e,a){switch(t){case"FavoriteEdit":this.openModal();break;case"FavoriteDelete":if(!confirm(bcI18n.commonConfirmDeleteMessage))return!1;var i=this.currentFavorite.id;$.bcToken.check((function(){$("#Waiting").show(),n.Z.post($.bcUtil.apiBaseUrl+"bc-favorite/favorites/delete/"+i+".json",{},{headers:{Authorization:$.bcJwt.accessToken}}).then(function(t){200===t.status?$("#FavoriteRow"+i).fadeOut(300,(function(){$(this).remove()})):alert("サーバーでの処理に失敗しました。"),$("#Waiting").hide()}.bind(this)).catch((function(t){alert("サーバーでの処理に失敗しました。"),$("#Waiting").hide()}))}),{hideLoader:!1})}}}};const p=(0,u.Z)(h,o,[],!1,null,null,null).exports;var b=a(9285);
/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) baserCMS User Community <https://basercms.net/community/>
 *
 * @copyright     Copyright (c) baserCMS User Community
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       http://basercms.net/license/index.html MIT License
 */
r().use(b.default),$((function(){new(r())({el:"#FavoriteMenu",components:{FavoriteIndex:p}})}))}},a={};function i(t){var r=a[t];if(void 0!==r)return r.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,a,r,o)=>{if(!a){var n=1/0;for(d=0;d<t.length;d++){for(var[a,r,o]=t[d],s=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((t=>i.O[t](a[l])))?a.splice(l--,1):(s=!1,o<n&&(n=o));if(s){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,r,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.j=7689,(()=>{var t={7689:0};i.O.j=e=>0===t[e];var e=(e,a)=>{var r,o,[n,s,l]=a,c=0;if(n.some((e=>0!==t[e]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var d=l(i)}for(e&&e(a);c<n.length;c++)o=n[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},a=self.webpackChunkbc_admin_third=self.webpackChunkbc_admin_third||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var r=i.O(void 0,[5e3],(()=>i(3546)));r=i.O(r)})();
//# sourceMappingURL=main.bundle.js.map